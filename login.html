<!DOCTYPE html>
<html lang="nb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChild - Login</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .login-container {
            max-width: 95%;
            width: 100%;
            margin: 50px auto;
            padding: 40px;
            background: linear-gradient(135deg, #ffffff 0%, #fff0f5 50%, #e0f7ff 100%);
            border-radius: 30px;
            box-shadow: 0 10px 40px rgba(255,0,255,0.4), 0 0 30px rgba(0,255,255,0.3);
            border: 5px solid;
            border-image: linear-gradient(45deg, #ff00ff, #00ffff, #ffff00, #ff00ff) 1;
            position: relative;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
            min-height: auto;
        }
        
        @media (min-width: 768px) {
            .login-container {
                max-width: 90%;
                padding: 50px;
            }
        }
        
        @media (min-width: 1200px) {
            .login-container {
                max-width: 85%;
                padding: 60px;
            }
        }
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow: hidden;
            word-wrap: break-word;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .form-group label {
            font-weight: bold;
            color: #333;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            word-wrap: break-word;
        }
        .form-group input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            box-sizing: border-box;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        .btn-primary {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ff00ff 0%, #00ffff 50%, #ff00ff 100%);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            color: white;
            border: 2px solid #ffffff;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 15px rgba(255,0,255,0.5);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .btn-primary:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 25px rgba(255,0,255,0.8);
        }
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .character-customization {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #fff0f5 0%, #e0f7ff 100%);
            border-radius: 20px;
            border: 3px solid #ff00ff;
            box-shadow: 0 0 15px rgba(255,0,255,0.3);
            overflow: hidden;
            word-wrap: break-word;
        }
        .customization-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        @media (min-width: 768px) {
            .customization-options {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 25px;
            }
        }
        .customization-options:has(#startAge) {
            display: flex;
            justify-content: center;
        }
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
        }
        .option-group label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            word-wrap: break-word;
        }
        .option-group select, .option-group input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            width: 100%;
            box-sizing: border-box;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
            padding-right: 32px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .option-group select:focus, .option-group input:focus {
            outline: none;
            border-color: #ff00ff;
            box-shadow: 0 0 10px rgba(255,0,255,0.4);
        }
        .option-group select {
            cursor: pointer;
        }
        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 12px;
            margin-top: 10px;
            max-width: 100%;
            overflow: hidden;
        }
        
        @media (min-width: 768px) {
            .emoji-picker {
                grid-template-columns: repeat(8, 1fr);
                gap: 15px;
            }
        }
        
        @media (min-width: 1200px) {
            .emoji-picker {
                grid-template-columns: repeat(10, 1fr);
            }
        }
        .emoji-option {
            font-size: 2em;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        .emoji-option:hover {
            border-color: #ff00ff;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255,0,255,0.5);
        }
        .emoji-option.selected {
            border-color: #ff00ff;
            background: linear-gradient(135deg, #ffe0f5 0%, #e0f5ff 100%);
            box-shadow: 0 0 15px rgba(255,0,255,0.6);
        }
        .avatar-preview {
            text-align: center;
            font-size: 4em;
            padding: 20px;
            background: linear-gradient(135deg, #fff0f5 0%, #e0f7ff 100%);
            border-radius: 50%;
            margin: 20px auto;
            width: 150px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid;
            border-image: linear-gradient(45deg, #ff00ff, #00ffff, #ffff00) 1;
            box-shadow: 0 0 20px rgba(255,0,255,0.5);
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div style="position: absolute; top: 10px; right: 10px; z-index: 10; pointer-events: none;">
            <img src="images/sticker2000.jpg" alt="2000s sticker" style="width: 80px; height: 80px; border-radius: 50%; border: 3px solid #ffffff; box-shadow: 0 0 15px rgba(255,0,255,0.5); filter: drop-shadow(0 0 10px rgba(0,255,255,0.5)); animation: float 3s ease-in-out infinite; transform: rotate(15deg);">
        </div>
        <div style="position: relative; z-index: 1; padding-right: 100px; padding-left: 20px;">
            <h1 style="background: linear-gradient(45deg, #ff00ff, #00ffff, #ff00ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-shadow: 3px 3px 0px #00ffff, -3px -3px 0px #ff00ff; overflow: hidden; text-overflow: ellipsis; word-wrap: break-word; max-width: 100%; margin: 0;">MyChild - 2000s Edition</h1>
            <p style="color: #ff00ff; margin-bottom: 30px; margin-top: 10px; font-weight: bold; overflow: hidden; text-overflow: ellipsis; word-wrap: break-word;">Velg brukernavn eller opprett nytt spill</p>
        </div>
        
        <style>
            @media (max-width: 768px) {
                .login-container > div[style*="padding-right: 100px"] {
                    padding-right: 20px !important;
                    padding-left: 10px !important;
                }
                .login-container > div[style*="top: 10px; right: 10px"] img {
                    width: 60px !important;
                    height: 60px !important;
                }
            }
        </style>
        <style>
            @keyframes float {
                0%, 100% { transform: translateY(0) rotate(15deg); }
                50% { transform: translateY(-10px) rotate(20deg); }
            }
        </style>
        
        <form class="login-form" id="loginForm">
            <div class="form-group">
                <label for="username">Brukernavn:</label>
                <input type="text" id="username" name="username" required placeholder="Skriv ditt brukernavn">
            </div>
            
            <div class="character-customization">
                <h3>Karaktertilpasning</h3>
                
                <div class="avatar-preview" id="avatarPreview">ğŸ‘¶</div>
                
                <div class="customization-options">
                    <div class="option-group">
                        <label>KjÃ¸nn:</label>
                        <select id="gender" name="gender">
                            <option value="boy">Gutt</option>
                            <option value="girl">Jente</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label>Navn:</label>
                        <input type="text" id="childName" name="childName" placeholder="Navn (valgfritt)">
                    </div>
                </div>
                
                <!-- Alder midt mellom de to Ã¸verste -->
                <div class="customization-options" style="margin-top: 15px; justify-content: center;">
                    <div class="option-group" style="max-width: 200px; margin: 0 auto;">
                        <label>Alder (start):</label>
                        <select id="startAge" name="startAge">
                            <option value="0">Baby (0 Ã¥r)</option>
                            <option value="1">1 Ã¥r</option>
                            <option value="2">2 Ã¥r</option>
                            <option value="3">3 Ã¥r</option>
                            <option value="4">4 Ã¥r</option>
                            <option value="5">5 Ã¥r</option>
                            <option value="6">6 Ã¥r</option>
                            <option value="7">7 Ã¥r</option>
                            <option value="8">8 Ã¥r</option>
                            <option value="9">9 Ã¥r</option>
                            <option value="10">10 Ã¥r</option>
                            <option value="11">11 Ã¥r</option>
                            <option value="12">12 Ã¥r</option>
                            <option value="13">13 Ã¥r</option>
                        </select>
                    </div>
                </div>
                
                <div class="option-group" style="margin-top: 15px;">
                    <label>Velg emoji for karakteren:</label>
                    <div class="emoji-picker" id="emojiPicker">
                        <div class="emoji-option" data-emoji="ğŸ‘¶">ğŸ‘¶</div>
                        <div class="emoji-option" data-emoji="ğŸ§’">ğŸ§’</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¦">ğŸ‘¦</div>
                        <div class="emoji-option" data-emoji="ğŸ‘§">ğŸ‘§</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘">ğŸ§‘</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨">ğŸ‘¨</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©">ğŸ‘©</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¦±">ğŸ§‘â€ğŸ¦±</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¦±">ğŸ‘¨â€ğŸ¦±</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¦±">ğŸ‘©â€ğŸ¦±</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¦°">ğŸ§‘â€ğŸ¦°</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¦°">ğŸ‘¨â€ğŸ¦°</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¦°">ğŸ‘©â€ğŸ¦°</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¦³">ğŸ§‘â€ğŸ¦³</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¦³">ğŸ‘¨â€ğŸ¦³</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¦³">ğŸ‘©â€ğŸ¦³</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¦²">ğŸ§‘â€ğŸ¦²</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¦²">ğŸ‘¨â€ğŸ¦²</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¦²">ğŸ‘©â€ğŸ¦²</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ“">ğŸ‘¨â€ğŸ“</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ“">ğŸ‘©â€ğŸ“</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ“">ğŸ§‘â€ğŸ“</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ’¼">ğŸ‘¨â€ğŸ’¼</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ’¼">ğŸ‘©â€ğŸ’¼</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ’¼">ğŸ§‘â€ğŸ’¼</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¤">ğŸ§‘â€ğŸ¤</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¤">ğŸ‘¨â€ğŸ¤</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¤">ğŸ‘©â€ğŸ¤</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ¨">ğŸ§‘â€ğŸ¨</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ¨">ğŸ‘¨â€ğŸ¨</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ¨">ğŸ‘©â€ğŸ¨</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ«">ğŸ§‘â€ğŸ«</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ«">ğŸ‘¨â€ğŸ«</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ«">ğŸ‘©â€ğŸ«</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€âš•ï¸">ğŸ§‘â€âš•ï¸</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€âš•ï¸">ğŸ‘¨â€âš•ï¸</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€âš•ï¸">ğŸ‘©â€âš•ï¸</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸ”¬">ğŸ§‘â€ğŸ”¬</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ”¬">ğŸ‘¨â€ğŸ”¬</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸ”¬">ğŸ‘©â€ğŸ”¬</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€ğŸš€">ğŸ§‘â€ğŸš€</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€ğŸš€">ğŸ‘¨â€ğŸš€</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€ğŸš€">ğŸ‘©â€ğŸš€</div>
                        <div class="emoji-option" data-emoji="ğŸ§‘â€âœˆï¸">ğŸ§‘â€âœˆï¸</div>
                        <div class="emoji-option" data-emoji="ğŸ‘¨â€âœˆï¸">ğŸ‘¨â€âœˆï¸</div>
                        <div class="emoji-option" data-emoji="ğŸ‘©â€âœˆï¸">ğŸ‘©â€âœˆï¸</div>
                    </div>
                </div>
                
                <div class="customization-options" style="margin-top: 15px;">
                    <div class="option-group">
                        <label>HÃ¥rfarge:</label>
                        <select id="hairColor" name="hairColor">
                            <option value="blonde">Blond</option>
                            <option value="brown">Brun</option>
                            <option value="black">Svart</option>
                            <option value="red">RÃ¸d</option>
                            <option value="other">Annet</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label>Ã˜yenfarge:</label>
                        <select id="eyeColor" name="eyeColor">
                            <option value="blue">BlÃ¥</option>
                            <option value="brown">Brun</option>
                            <option value="green">GrÃ¸nn</option>
                            <option value="hazel">NÃ¸ttebrun</option>
                            <option value="gray">GrÃ¥</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label>Stil:</label>
                        <select id="style" name="style">
                            <option value="normal">Normal</option>
                            <option value="cap">Caps</option>
                            <option value="hoodie">Hoodie</option>
                            <option value="sporty">Sporty</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn-primary">Start Spill</button>
        </form>
        
        <div id="existingGames" style="margin-top: 30px;">
            <h3>Eksisterende spill:</h3>
            <div id="gamesList"></div>
        </div>
    </div>
    
    <script>
        let selectedEmoji = 'ğŸ‘¶';
        
        // Load existing games
        function loadExistingGames() {
            const gamesList = document.getElementById('gamesList');
            gamesList.innerHTML = '';
            
            const games = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('mychild_game_')) {
                    try {
                        const gameData = JSON.parse(localStorage.getItem(key));
                        const username = key.replace('mychild_game_', '');
                        games.push({
                            username, 
                            day: gameData.day || 1, 
                            age: gameData.child?.age || 8,
                            lastSaved: gameData.lastSaved || null
                        });
                    } catch (e) {
                        console.error('Error loading game:', e);
                    }
                }
            }
            
            // Sort by last saved (most recent first)
            games.sort((a, b) => {
                if (!a.lastSaved) return 1;
                if (!b.lastSaved) return -1;
                return new Date(b.lastSaved) - new Date(a.lastSaved);
            });
            
            if (games.length === 0) {
                gamesList.innerHTML = '<p style="color: #666;">Ingen eksisterende spill</p>';
                return;
            }
            
            games.forEach(game => {
                const gameDiv = document.createElement('div');
                gameDiv.style.cssText = 'padding: 10px; margin: 5px 0; background: #f0f0f0; border-radius: 5px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;';
                
                const lastSaved = game.lastSaved ? new Date(game.lastSaved).toLocaleString('no-NO') : 'Ukjent';
                const buttonDiv = document.createElement('div');
                buttonDiv.style.cssText = 'display: flex; gap: 5px;';
                
                const loadBtn = document.createElement('button');
                loadBtn.textContent = 'Last inn';
                loadBtn.style.cssText = 'padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;';
                loadBtn.onclick = () => loadGame(game.username);
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'ğŸ—‘ï¸';
                deleteBtn.style.cssText = 'padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;';
                deleteBtn.onclick = () => {
                    if (confirm(`Er du sikker pÃ¥ at du vil slette spillet "${game.username}"?`)) {
                        try {
                            localStorage.removeItem(`mychild_game_${game.username}`);
                            localStorage.removeItem(`mychild_customization_${game.username}`);
                            loadExistingGames();
                        } catch (e) {
                            alert('Kunne ikke slette spillet.');
                        }
                    }
                };
                
                buttonDiv.appendChild(loadBtn);
                buttonDiv.appendChild(deleteBtn);
                
                gameDiv.innerHTML = `
                    <div>
                        <strong>${game.username}</strong> - Dag ${game.day}, ${game.age} Ã¥r<br>
                        <small style="color: #666;">Sist lagret: ${lastSaved}</small>
                    </div>
                `;
                gameDiv.appendChild(buttonDiv);
                gamesList.appendChild(gameDiv);
            });
        }
        
        function loadGame(username) {
            window.location.href = `index.html?username=${encodeURIComponent(username)}`;
        }
        
        // Emoji picker
        document.querySelectorAll('.emoji-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.emoji-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                selectedEmoji = this.dataset.emoji;
                document.getElementById('avatarPreview').textContent = selectedEmoji;
            });
        });
        
        // Form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value.trim();
            const gender = document.getElementById('gender').value;
            const childName = document.getElementById('childName').value.trim() || (gender === 'girl' ? 'Jente' : 'Gutt');
            const startAge = parseInt(document.getElementById('startAge').value);
            const hairColor = document.getElementById('hairColor').value;
            const eyeColor = document.getElementById('eyeColor').value;
            const style = document.getElementById('style').value;
            
            if (!username) {
                alert('Vennligst skriv inn et brukernavn');
                return;
            }
            
            // Store character customization
            const customization = {
                gender,
                name: childName,
                age: startAge,
                emoji: selectedEmoji,
                hairColor,
                eyeColor,
                style
            };
            
            localStorage.setItem(`mychild_customization_${username}`, JSON.stringify(customization));
            
            // Redirect to game
            window.location.href = `index.html?username=${encodeURIComponent(username)}`;
        });
        
        // Load games on page load
        loadExistingGames();
        
        // Update preview when gender changes
        document.getElementById('gender').addEventListener('change', function() {
            const gender = this.value;
            const nameInput = document.getElementById('childName');
            if (!nameInput.value.trim()) {
                nameInput.value = gender === 'girl' ? 'Jente' : 'Gutt';
            }
        });
    </script>
</body>
</html>

