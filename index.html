<!DOCTYPE html>
<html lang="nb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChild - 2000s Edition</title>
    
    <!-- Favicon and Theme Colors -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='bg' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%23ff00ff'/><stop offset='50%' style='stop-color:%2300ffff'/><stop offset='100%' style='stop-color:%23ff00ff'/></linearGradient></defs><circle cx='50' cy='50' r='50' fill='url(%23bg)'/><circle cx='50' cy='45' r='25' fill='%23ffdbac'/><circle cx='42' cy='40' r='3' fill='%23000'/><circle cx='58' cy='40' r='3' fill='%23000'/><path d='M 40 50 Q 50 58 60 50' stroke='%23000' stroke-width='2' fill='none'/></svg>">
    <meta name="theme-color" content="#ff00ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MyChild">
    
    <link rel="stylesheet" href="style.css">
    <!-- API Configuration - Load local config if available, otherwise use example -->
    <script>
        // Try to load local API config first (not in git)
        const script = document.createElement('script');
        script.src = 'api-config.local.js';
        script.onerror = () => {
            // If local config doesn't exist, load example (will be disabled)
            const exampleScript = document.createElement('script');
            exampleScript.src = 'api-config.example.js';
            document.head.appendChild(exampleScript);
        };
        document.head.appendChild(script);
    </script>
</head>
<body>
    <div class="container">
        <header>
            <div class="sticker-decoration sticker-top-left">
                <img src="images/sticker2000.jpg" alt="2000s sticker" class="sticker-img">
            </div>
            <div class="header-title-wrapper">
                <h1>MyChild - 2000s Edition</h1>
            </div>
            <div class="header-controls">
                <div class="year-display">Year: <span id="currentYear">2000</span></div>
                <div id="moneyDisplay" style="display: none; margin: 0 10px; padding: 5px 10px; background: rgba(255,255,255,0.3); border-radius: 10px; font-weight: bold;">
                    ğŸ’° <span id="moneyValue">0</span>
                </div>
                <span id="saveIndicator" style="opacity: 0.5; font-size: 0.9em; margin-right: 10px; transition: opacity 0.3s;">ğŸ’¾</span>
                <button id="musicToggle" class="music-btn" onclick="game.toggleMusic()" title="Toggle background music">
                    ğŸµ
                </button>
                <button class="music-btn" onclick="game.deleteGame()" title="Slett dette spillet" style="margin-left: 10px;">
                    ğŸ—‘ï¸
                </button>
                <button class="music-btn" onclick="window.location.href='login.html'" title="Logg ut / Tilbake til innlogging" style="margin-left: 10px;">
                    ğŸšª
                </button>
                <button class="music-btn" onclick="game.showHelp()" title="Vis hjelp og tips" style="margin-left: 10px;">
                    â“
                </button>
                <button class="music-btn" onclick="game.openProfile()" title="Profil" style="margin-left: 10px;">
                    ğŸ‘¤
                </button>
            </div>
        </header>

        <div class="game-area">
            <div class="child-status">
                <div class="sticker-decoration sticker-avatar">
                    <img src="images/stickerbaby1.jpg" alt="Baby sticker" class="sticker-img-small">
                </div>
                <div class="child-avatar" onclick="game.openProfile()" title="Klikk for Ã¥ redigere profil" style="cursor: pointer;">ğŸ‘¶</div>
                <h2 id="childName">Your Child</h2>
                <div class="sticker-decoration sticker-avatar-bottom">
                    <img src="images/stickerbaby2.jpg" alt="Baby sticker 2" class="sticker-img-small">
                </div>
                <div class="stats">
                    <div class="stat">
                        <span class="stat-label">Happiness:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="happinessBar" style="width: 50%"></div>
                        </div>
                        <span id="happinessValue">50</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Energy:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="energyBar" style="width: 80%"></div>
                        </div>
                        <span id="energyValue">80</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Social:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="socialBar" style="width: 60%"></div>
                        </div>
                        <span id="socialValue">60</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Learning:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="learningBar" style="width: 40%"></div>
                        </div>
                        <span id="learningValue">40</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Hunger:</span>
                        <div class="stat-bar">
                            <div class="stat-fill hunger-fill" id="hungerBar" style="width: 70%"></div>
                        </div>
                        <span id="hungerValue">70</span>
                    </div>
                </div>
                
                <!-- Hidden stats / Progress indicators -->
                <div class="progress-stats" id="progressStats" style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #e0e0e0; display: none;">
                    <div class="stat-mini">
                        <span class="stat-label-mini">Resilience:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="resilienceBar" style="width: 50%"></div>
                        </div>
                        <span id="resilienceValue">50</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Study Level:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="studyBar" style="width: 0%"></div>
                        </div>
                        <span id="studyValue">0</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Helped Others:</span>
                        <span id="helpingValue" style="font-weight: bold; color: #4caf50;">0</span>
                    </div>
                </div>
                
                <button class="toggle-stats-btn" onclick="game.toggleProgressStats()" style="margin-top: 10px; padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9em;">
                    ğŸ“Š Vis fremgang
                </button>
            </div>

            <div class="game-content">
                <div class="scene-area">
                    <div class="scene-image" id="sceneImage">
                        <!-- Scene image will be inserted here -->
                    </div>
                    <div class="scene-name" id="sceneName">Home</div>
                </div>

                <div class="narrative-area">
                    <div class="child-dialogue" id="childDialogue">
                        <p id="dialogueText"></p>
                    </div>
                    <div class="story-message" id="storyMessage">
                        <p id="statusMessage">Welcome! Take care of your child in the 2000s.</p>
                    </div>
                </div>

                <div class="choices-area" id="choicesArea">
                    <!-- Choices will be dynamically generated -->
                </div>

                <div class="actions-area" id="actionsArea">
                    <h3 data-translate="activities">Aktiviteter</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="game.goToLocation('playground')">
                            <img src="images/playoutside.png" alt="Playground" class="action-icon"> <span data-translate="playground">Lekegrind</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('nature')">
                            ğŸŒ³ <span data-translate="nature">Natur</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('school')">
                            ğŸ« <span data-translate="school">Skole</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('home')">
                            ğŸ  <span data-translate="home">Hjem</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('friend')">
                            ğŸ‘¥ <span data-translate="friend">Venns hus</span>
                        </button>
                    </div>
                <div class="daily-routines">
                    <h4 data-translate="dailyCare">Daglig omsorg</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn feed-btn" onclick="game.feedChild()">
                            <img src="images/babybottle.png" alt="Feed" class="action-icon feed-icon"> <span class="btn-text" data-translate="feed">FÃ´r</span>
                        </button>
                        <button class="routine-btn" onclick="game.batheChild()">ğŸ› <span data-translate="bathe">Bad</span></button>
                        <button class="routine-btn" onclick="game.playWithChild()">ğŸ® <span data-translate="play">Lek</span></button>
                        <button class="routine-btn" onclick="game.readToChild()">ğŸ“– <span data-translate="read">Les</span></button>
                        <button class="routine-btn" onclick="game.practiceMindfulness()">ğŸ§˜ <span data-translate="mindfulness">Mindfulness</span></button>
                        <button class="routine-btn" onclick="game.drawOrCreate()">ğŸ¨ <span data-translate="draw">Tegn/Lag</span></button>
                        <button class="routine-btn" onclick="game.cookTogether()">ğŸ³ <span data-translate="cook">Lag mat</span></button>
                    </div>
                    <h4 data-translate="support">StÃ¸tte og mestring</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.daydream()">ğŸ’­ <span data-translate="daydream">DrÃ¸m</span></button>
                        <button class="routine-btn" onclick="game.talkToCaringAdult()">ğŸ’¬ <span data-translate="talk">Snakk</span></button>
                        <button class="routine-btn" onclick="game.learnAboutEmotions()">â¤ï¸ <span data-translate="learnEmotions">LÃ¦r fÃ¸lelser</span></button>
                    </div>
                    <h4 data-translate="growth">Vekst og valg</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.studyHard()">ğŸ“š <span data-translate="study">Studer</span></button>
                        <button class="routine-btn" onclick="game.volunteer()">ğŸ¤ <span data-translate="volunteer">Frivillig</span></button>
                        <button class="routine-btn" onclick="game.helpOthers()">ğŸ¦¸ <span data-translate="help">Hjelp andre</span></button>
                        <button class="routine-btn" onclick="game.exercise()">ğŸƒ <span data-translate="exercise">Trening</span></button>
                    </div>
                    <h4 data-translate="freeTime">Fritid</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.readBooks()" id="readBooksBtn">ğŸ“š <span data-translate="readBooks">Les bÃ¸ker</span></button>
                        <button class="routine-btn" onclick="game.playVideoGames()">ğŸ® <span data-translate="games">Spill</span></button>
                        <button class="routine-btn" onclick="game.quizAboutEmotions()">â“ <span data-translate="quiz">FÃ¸lelses-quiz</span></button>
                        <button class="routine-btn" onclick="game.listenToMusic()">
                            <img src="images/cd.png" alt="Music" class="action-icon" style="width: 20px; height: 20px;"> <span data-translate="music">HÃ¸r musikk</span>
                        </button>
                        <button class="routine-btn" onclick="game.callFriend()">
                            <img src="images/nokiaphone.png" alt="Phone" class="action-icon" style="width: 20px; height: 20px;"> <span data-translate="call">Ring venn</span>
                        </button>
                    </div>
                </div>
                </div>

                <div class="time-control">
                    <button class="time-btn" onclick="game.nextDay()">Next Day â†’</button>
                    <div class="time-info">
                        <span>Day: <span id="currentDay">1</span></span>
                        <span>Time: <span id="currentTime">Morning</span></span>
                        <span id="actionInfo" style="color: #28a745; font-weight: bold;">Actions: 6/6</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop playsinline preload="auto">
        <source src="08 - Free.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script src="character-renderer.js"></script>
    <script src="game.js"></script>
    <script>
        // Check if username is provided, redirect to login if not
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const username = urlParams.get('username');
            if (!username) {
                window.location.href = 'login.html';
            }
        });
    </script>
    
    <!-- Profile Modal -->
    <div id="profileModal" class="modal" style="display: none;">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2>Profilredigering</h2>
                <span class="close-modal" onclick="game.closeProfile()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-section">
                    <h3>Avatar</h3>
                    <div class="avatar-options">
                        <div class="current-avatar" id="currentAvatarDisplay">
                            <div class="child-avatar-large" id="profileAvatar">ğŸ‘¶</div>
                            <p>NÃ¥vÃ¦rende avatar</p>
                        </div>
                        <div class="avatar-choices">
                            <h4>Velg avatar:</h4>
                            <div class="avatar-tabs">
                                <button class="tab-btn active" onclick="game.showAvatarTab('badges')">Badges</button>
                                <button class="tab-btn" onclick="game.showAvatarTab('upload')">Last opp bilde</button>
                            </div>
                            <div id="badgesTab" class="avatar-tab-content active">
                                <div class="badges-grid" id="badgesGrid">
                                    <!-- Badges will be populated here -->
                                </div>
                            </div>
                            <div id="uploadTab" class="avatar-tab-content">
                                <input type="file" id="avatarUpload" accept="image/*" onchange="game.handleAvatarUpload(event)" style="display: none;">
                                <button class="btn-primary" onclick="document.getElementById('avatarUpload').click()">Velg bilde</button>
                                <p style="font-size: 0.9em; margin-top: 10px; color: #666;">Last opp ditt eget bilde som avatar</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3 data-translate="language">SprÃ¥k</h3>
                    <div class="language-selector">
                        <label>
                            <input type="radio" name="language" value="no" onchange="game.setLanguage('no')" checked>
                            <span>ğŸ‡³ğŸ‡´ Norsk</span>
                        </label>
                        <label>
                            <input type="radio" name="language" value="en" onchange="game.setLanguage('en')">
                            <span>ğŸ‡¬ğŸ‡§ English</span>
                        </label>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3>Om meg</h3>
                    <textarea id="profileBio" rows="4" placeholder="Skriv litt om deg selv..." style="width: 100%; padding: 10px; border-radius: 10px; border: 2px solid #ff00ff; font-family: inherit;"></textarea>
                    <button class="btn-primary" onclick="game.saveProfile()" style="margin-top: 10px;">Lagre bio</button>
                </div>
                
                <div class="profile-section">
                    <h3 data-translate="shop">Butikk</h3> ğŸ’°
                    <div class="money-display-profile">
                        <p>Du har: <span id="profileMoney">0</span> kr</p>
                    </div>
                    <div class="shop-items" id="shopItems">
                        <!-- Shop items will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

