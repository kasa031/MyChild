<!DOCTYPE html>
<html lang="nb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChild - 2000s Edition</title>
    <link rel="stylesheet" href="style.css">
    <!-- API Configuration - Load local config if available, otherwise use example -->
    <script>
        // Try to load local API config first (not in git)
        const script = document.createElement('script');
        script.src = 'api-config.local.js';
        script.onerror = () => {
            // If local config doesn't exist, load example (will be disabled)
            const exampleScript = document.createElement('script');
            exampleScript.src = 'api-config.example.js';
            document.head.appendChild(exampleScript);
        };
        document.head.appendChild(script);
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>MyChild - 2000s Edition</h1>
            <div class="header-controls">
                <div class="year-display">Year: <span id="currentYear">2000</span></div>
                <span id="saveIndicator" style="opacity: 0.5; font-size: 0.9em; margin-right: 10px; transition: opacity 0.3s;">ğŸ’¾</span>
                <button id="musicToggle" class="music-btn" onclick="game.toggleMusic()" title="Toggle background music">
                    ğŸµ
                </button>
                <button class="music-btn" onclick="game.deleteGame()" title="Slett dette spillet" style="margin-left: 10px;">
                    ğŸ—‘ï¸
                </button>
                <button class="music-btn" onclick="window.location.href='login.html'" title="Logg ut / Tilbake til innlogging" style="margin-left: 10px;">
                    ğŸšª
                </button>
            </div>
        </header>

        <div class="game-area">
            <div class="child-status">
                <div class="child-avatar">ğŸ‘¶</div>
                <h2 id="childName">Your Child</h2>
                <div class="stats">
                    <div class="stat">
                        <span class="stat-label">Happiness:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="happinessBar" style="width: 50%"></div>
                        </div>
                        <span id="happinessValue">50</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Energy:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="energyBar" style="width: 80%"></div>
                        </div>
                        <span id="energyValue">80</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Social:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="socialBar" style="width: 60%"></div>
                        </div>
                        <span id="socialValue">60</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Learning:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="learningBar" style="width: 40%"></div>
                        </div>
                        <span id="learningValue">40</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Hunger:</span>
                        <div class="stat-bar">
                            <div class="stat-fill hunger-fill" id="hungerBar" style="width: 70%"></div>
                        </div>
                        <span id="hungerValue">70</span>
                    </div>
                </div>
                
                <!-- Hidden stats / Progress indicators -->
                <div class="progress-stats" id="progressStats" style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #e0e0e0; display: none;">
                    <div class="stat-mini">
                        <span class="stat-label-mini">Resilience:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="resilienceBar" style="width: 50%"></div>
                        </div>
                        <span id="resilienceValue">50</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Study Level:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="studyBar" style="width: 0%"></div>
                        </div>
                        <span id="studyValue">0</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Helped Others:</span>
                        <span id="helpingValue" style="font-weight: bold; color: #4caf50;">0</span>
                    </div>
                </div>
                
                <button class="toggle-stats-btn" onclick="game.toggleProgressStats()" style="margin-top: 10px; padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9em;">
                    ğŸ“Š Vis fremgang
                </button>
            </div>

            <div class="game-content">
                <div class="scene-area">
                    <div class="scene-image" id="sceneImage">
                        <!-- Scene image will be inserted here -->
                    </div>
                    <div class="scene-name" id="sceneName">Home</div>
                </div>

                <div class="narrative-area">
                    <div class="child-dialogue" id="childDialogue">
                        <p id="dialogueText"></p>
                    </div>
                    <div class="story-message" id="storyMessage">
                        <p id="statusMessage">Welcome! Take care of your child in the 2000s.</p>
                    </div>
                </div>

                <div class="choices-area" id="choicesArea">
                    <!-- Choices will be dynamically generated -->
                </div>

                <div class="actions-area" id="actionsArea">
                    <h3>Activities</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="game.goToLocation('playground')">
                            ğŸƒ Playground
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('school')">
                            ğŸ« School
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('home')">
                            ğŸ  Home
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('friend')">
                            ğŸ‘¥ Friend's House
                        </button>
                    </div>
                <div class="daily-routines">
                    <h4>Daily Care</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.feedChild()">ğŸ• Feed</button>
                        <button class="routine-btn" onclick="game.batheChild()">ğŸ› Bathe</button>
                        <button class="routine-btn" onclick="game.playWithChild()">ğŸ® Play</button>
                        <button class="routine-btn" onclick="game.readToChild()">ğŸ“– Read</button>
                    </div>
                    <h4>Support & Coping</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.daydream()">ğŸ’­ Daydream</button>
                        <button class="routine-btn" onclick="game.talkToCaringAdult()">ğŸ’¬ Talk</button>
                    </div>
                    <h4>Growth & Choices</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.studyHard()">ğŸ“š Study Hard</button>
                        <button class="routine-btn" onclick="game.volunteer()">ğŸ¤ Volunteer</button>
                        <button class="routine-btn" onclick="game.helpOthers()">ğŸ¦¸ Help Others</button>
                    </div>
                    <h4>Free Time (Choose Wisely)</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.watchTikTok()">ğŸ“± TikTok</button>
                        <button class="routine-btn" onclick="game.playVideoGames()">ğŸ® Games</button>
                    </div>
                </div>
                </div>

                <div class="time-control">
                    <button class="time-btn" onclick="game.nextDay()">Next Day â†’</button>
                    <div class="time-info">
                        <span>Day: <span id="currentDay">1</span></span>
                        <span>Time: <span id="currentTime">Morning</span></span>
                        <span id="actionInfo" style="color: #28a745; font-weight: bold;">Actions: 6/6</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
        <source src="08 - Free.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script src="character-renderer.js"></script>
    <script src="game.js"></script>
    <script>
        // Check if username is provided, redirect to login if not
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const username = urlParams.get('username');
            if (!username) {
                window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>

