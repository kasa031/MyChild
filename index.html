<!DOCTYPE html>
<html lang="nb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChild - 2000s Edition</title>
    
    <!-- Favicon and Theme Colors -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='bg' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%23ff00ff'/><stop offset='50%' style='stop-color:%2300ffff'/><stop offset='100%' style='stop-color:%23ff00ff'/></linearGradient></defs><circle cx='50' cy='50' r='50' fill='url(%23bg)'/><circle cx='50' cy='45' r='25' fill='%23ffdbac'/><circle cx='42' cy='40' r='3' fill='%23000'/><circle cx='58' cy='40' r='3' fill='%23000'/><path d='M 40 50 Q 50 58 60 50' stroke='%23000' stroke-width='2' fill='none'/></svg>">
    <meta name="theme-color" content="#ff00ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MyChild">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="assets/favicon.svg">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="assets/icons/icon-512x512.png">
    
    <link rel="stylesheet" href="css/style.css">
    <!-- Pixi.js for enhanced 2D graphics -->
    <script src="https://pixijs.download/release/pixi.min.js"></script>
    <!-- API Configuration - Load local config if available, otherwise use example -->
    <script>
        // Try to load local API config first (not in git)
        const script = document.createElement('script');
        script.src = 'config/api-config.local.js';
        script.onerror = () => {
            // If local config doesn't exist, load example (will be disabled)
            const exampleScript = document.createElement('script');
            exampleScript.src = 'config/api-config.example.js';
            document.head.appendChild(exampleScript);
        };
        document.head.appendChild(script);
    </script>
</head>
<body>
    <div class="container">
        <!-- Navigation Menu -->
        <nav class="main-menu" id="mainMenu">
            <div class="menu-tabs">
                <button class="menu-tab active" onclick="game.showMenuTab('game')" id="gameTab">
                    <span class="menu-icon">ğŸ®</span>
                    <span class="menu-text">Spill</span>
                </button>
                <button class="menu-tab" onclick="game.showMenuTab('about')" id="aboutTab">
                    <span class="menu-icon">ğŸ“–</span>
                    <span class="menu-text">Om spillet</span>
                </button>
                <button class="menu-tab" onclick="game.showMenuTab('project')" id="projectTab">
                    <span class="menu-icon">ğŸ’¼</span>
                    <span class="menu-text">Om prosjektet</span>
                </button>
                <button class="menu-tab" onclick="game.showMenuTab('profile')" id="profileTab">
                    <span class="menu-icon">ğŸ‘¤</span>
                    <span class="menu-text">Profil</span>
                </button>
                <button class="menu-tab" onclick="game.showMenuTab('diary')" id="diaryTab">
                    <span class="menu-icon">ğŸ“”</span>
                    <span class="menu-text">Dagbok</span>
                </button>
            </div>
        </nav>
        
        <header>
            <div class="sticker-decoration sticker-top-left">
                <img src="assets/images/sticker2000.jpg" alt="2000s sticker" class="sticker-img" loading="lazy">
            </div>
            <div class="header-title-wrapper">
                <h1>MyChild - 2085: Dystopia Edition</h1>
            </div>
            <div class="header-controls">
                <div class="year-display" id="yearDisplay">Year: <span id="currentYear">2085</span></div>
                <div id="moneyDisplay" style="display: none; margin: 0 10px; padding: 5px 10px; background: rgba(255,255,255,0.3); border-radius: 10px; font-weight: bold;">
                    ğŸ’° <span id="moneyValue">0</span>
                </div>
                <span id="saveIndicator" 
                      class="save-indicator"
                      role="status" 
                      aria-live="polite" 
                      aria-label="Lagre status"
                      style="opacity: 0.6; font-size: 0.9em; margin-right: 10px; transition: all 0.3s; cursor: help;"
                      title="Spillet lagres automatisk hvert 30. sekund">ğŸ’¾</span>
                <button id="musicToggle" 
                        class="music-btn" 
                        onclick="game.toggleMusic()" 
                        title="Toggle background music"
                        aria-label="Toggle background music"
                        role="button">
                    ğŸµ
                </button>
                <button class="music-btn" 
                        onclick="game.deleteGame()" 
                        title="Slett dette spillet" 
                        aria-label="Slett dette spillet"
                        role="button"
                        style="margin-left: 10px;">
                    ğŸ—‘ï¸
                </button>
                <button class="music-btn" 
                        onclick="window.location.href='login.html'" 
                        title="Logg ut / Tilbake til innlogging" 
                        aria-label="Logg ut"
                        role="button"
                        style="margin-left: 10px;">
                    ğŸšª
                </button>
                <button class="music-btn" 
                        onclick="game.showHelp()" 
                        title="Vis hjelp og tips" 
                        aria-label="Vis hjelp"
                        role="button"
                        style="margin-left: 10px;">
                    â“
                </button>
                <button class="music-btn" 
                        onclick="game.openProfile()" 
                        title="Profil" 
                        aria-label="Ã…pne profil"
                        role="button"
                        style="margin-left: 10px;">
                    ğŸ‘¤
                </button>
            </div>
        </header>

        <div class="game-area">
            <div class="child-status">
                <div class="sticker-decoration sticker-avatar">
                    <img src="assets/images/stickerbaby1.jpg" alt="Baby sticker" class="sticker-img-small" loading="lazy">
                </div>
                <div class="child-avatar" 
                     onclick="game.openProfile()" 
                     title="Klikk for Ã¥ redigere profil" 
                     aria-label="Barnets avatar - klikk for Ã¥ redigere profil"
                     role="button"
                     tabindex="0"
                     onkeypress="if(event.key==='Enter'||event.key===' '){game.openProfile();}"
                     style="cursor: pointer;" 
                     id="childAvatar">ğŸ‘¶</div>
                <h2 id="childName">Your Child</h2>
                <div id="emotionDisplay" style="margin-top: 15px; padding: 10px 15px; background: rgba(255,255,255,0.3); border-radius: 15px; font-size: 1.1em; display: none; font-weight: bold; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                    <span id="emotionText"></span>
                </div>
                <div class="sticker-decoration sticker-avatar-bottom">
                    <img src="assets/images/stickerbaby2.jpg" alt="Baby sticker 2" class="sticker-img-small" loading="lazy">
                </div>
                <div class="stats">
                    <div class="stat">
                        <span class="stat-label">Happiness:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="happinessBar" style="width: 50%"></div>
                        </div>
                        <span id="happinessValue">50</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Energy:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="energyBar" style="width: 80%"></div>
                        </div>
                        <span id="energyValue">80</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Social:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="socialBar" style="width: 60%"></div>
                        </div>
                        <span id="socialValue">60</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Learning:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="learningBar" style="width: 40%"></div>
                        </div>
                        <span id="learningValue">40</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Hunger:</span>
                        <div class="stat-bar">
                            <div class="stat-fill hunger-fill" id="hungerBar" style="width: 70%"></div>
                        </div>
                        <span id="hungerValue">70</span>
                    </div>
                </div>
                
                <!-- Hidden stats / Progress indicators -->
                <div class="progress-stats" id="progressStats" style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #e0e0e0; display: none;">
                    <div class="stat-mini">
                        <span class="stat-label-mini">Resilience:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="resilienceBar" style="width: 50%"></div>
                        </div>
                        <span id="resilienceValue">50</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Study Level:</span>
                        <div class="stat-bar-mini">
                            <div class="stat-fill-mini" id="studyBar" style="width: 0%"></div>
                        </div>
                        <span id="studyValue">0</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label-mini">Helped Others:</span>
                        <span id="helpingValue" style="font-weight: bold; color: #4caf50;">0</span>
                    </div>
                </div>
                
                <button class="toggle-stats-btn" onclick="game.toggleProgressStats()" style="margin-top: 10px; padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9em;">
                    ğŸ“Š Vis fremgang
                </button>
            </div>

            <div class="game-content">
                <div class="scene-area">
                    <div class="scene-image" id="sceneImage">
                        <!-- Scene image will be inserted here -->
                    </div>
                    <div class="scene-name" id="sceneName">Home</div>
                </div>

                <div class="narrative-area">
                    <div class="child-dialogue" id="childDialogue">
                        <p id="dialogueText"></p>
                    </div>
                    <div class="story-message" id="storyMessage">
                        <p id="statusMessage"></p>
                    </div>
                </div>

                <div class="choices-area" id="choicesArea">
                    <!-- Choices will be dynamically generated -->
                </div>

                <div class="actions-area" id="actionsArea">
                    <div id="actionInfo" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 20px; border-radius: 10px; margin-bottom: 15px; text-align: center; font-size: 1.1em; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <span id="actionInfoText">Handlinger: 5/5</span>
                    </div>
                    <h3 data-translate="activities">Aktiviteter</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="game.openUniverse('playground')">
                            <img src="assets/images/playoutside.png" alt="Playground" class="action-icon" loading="lazy"> <span data-translate="playground">Lekegrind</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('nature')">
                            ğŸŒ³ <span data-translate="nature">Natur</span>
                        </button>
                        <button class="action-btn" onclick="game.openUniverse('school')">
                            ğŸ« <span data-translate="school">Skole</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('home')">
                            ğŸ  <span data-translate="home">Hjem</span>
                        </button>
                        <button class="action-btn" onclick="game.goToLocation('friend')">
                            ğŸ‘¥ <span data-translate="friend">Venns hus</span>
                        </button>
                    </div>
                <div class="daily-routines">
                    <h4 data-translate="dailyCare">Daglig omsorg</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn feed-btn" onclick="game.feedChild()">
                            <img src="assets/images/babybottle.png" alt="Feed" class="action-icon feed-icon" loading="lazy"> <span class="btn-text" data-translate="feed">FÃ´r</span>
                        </button>
                        <button class="routine-btn" onclick="game.batheChild()">ğŸ› <span data-translate="bathe">Bad</span></button>
                        <button class="routine-btn" onclick="game.playWithChild()">ğŸ® <span data-translate="play">Lek</span></button>
                        <button class="routine-btn" onclick="game.readToChild()">ğŸ“– <span data-translate="read">Les</span></button>
                        <button class="routine-btn" onclick="game.practiceMindfulness()">ğŸ§˜ <span data-translate="mindfulness">Mindfulness</span></button>
                        <button class="routine-btn" onclick="game.drawOrCreate()">ğŸ¨ <span data-translate="draw">Tegn/Lag</span></button>
                        <button class="routine-btn" onclick="game.openUniverse('cooking')">ğŸ³ <span data-translate="cook">Lag mat</span></button>
                        <button class="routine-btn" onclick="game.rest()">ğŸ˜´ <span data-translate="rest">Hvile/SÃ¸vn</span></button>
                        <!-- Age-specific activities -->
                        <button class="routine-btn" id="pottyTrainingBtn" onclick="game.pottyTraining()" style="display: none;">ğŸš½ <span>Pottetrening (1-2 Ã¥r)</span></button>
                        <button class="routine-btn" id="spellingBtn" onclick="game.learnSpelling()" style="display: none;">ğŸ”¤ <span>Stave (2-4 Ã¥r)</span></button>
                        <button class="routine-btn" id="bikeBtn" onclick="game.learnBike()" style="display: none;">ğŸš² <span>LÃ¦r Ã¥ sykle (6-7 Ã¥r)</span></button>
                        <button class="routine-btn" id="swimBtn" onclick="game.learnSwimming()" style="display: none;">ğŸŠ <span>LÃ¦r Ã¥ svÃ¸mme (5+ Ã¥r)</span></button>
                    </div>
                    <h4>Livet og sosiale ferdigheter</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.learnSharing()">ğŸ¤ <span>LÃ¦r Ã¥ dele</span></button>
                        <button class="routine-btn" onclick="game.learnRespect()">ğŸ’™ <span>Respektere forskjeller</span></button>
                        <button class="routine-btn" onclick="game.learnPatience()">â³ <span>TÃ¥lmodighet</span></button>
                        <button class="routine-btn" onclick="game.learnSelfDiscipline()">ğŸ¯ <span>Selvdisiplin</span></button>
                        <button class="routine-btn" onclick="game.learnPlanning()">ğŸ“‹ <span>Planlegging</span></button>
                    </div>
                    <!-- Age-specific: Parent work for babies -->
                    <button class="routine-btn" id="parentWorkBtn" onclick="game.sendParentToWork()" style="display: none;">ğŸ‘¨â€ğŸ’¼ <span>Send forelder pÃ¥ jobb (Baby)</span></button>
                    <!-- Age-specific: Pet system (5+) -->
                    <button class="routine-btn" id="getPetBtn" onclick="game.choosePet()" style="display: none;">ğŸ¾ <span>FÃ¥ kjÃ¦ledyr (5+ Ã¥r)</span></button>
                    <button class="routine-btn" id="careForPetBtn" onclick="game.careForPet()" style="display: none;">ğŸ• <span>Ta vare pÃ¥ kjÃ¦ledyr</span></button>
                    <!-- Age-specific: Relationship and family (18+) -->
                    <button class="routine-btn" id="findPartnerBtn" onclick="game.findPartner()" style="display: none;">ğŸ’‘ <span>Finn partner (18+ Ã¥r)</span></button>
                    <button class="routine-btn" id="marryBtn" onclick="game.proposeMarriage()" style="display: none;">ğŸ’ <span>Gifte seg</span></button>
                    <button class="routine-btn" id="adoptBtn" onclick="game.adoptChild()" style="display: none;">ğŸ‘¶ <span>Adoptere barn</span></button>
                    <button class="routine-btn" id="careForFamilyBtn" onclick="game.careForFamily()" style="display: none;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ <span>Ta vare pÃ¥ familien</span></button>
                    <h4 data-translate="support">StÃ¸tte og mestring</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.daydream()">ğŸ’­ <span data-translate="daydream">DrÃ¸m</span></button>
                        <button class="routine-btn" onclick="game.talkToCaringAdult()">ğŸ’¬ <span data-translate="talk">Snakk</span></button>
                        <button class="routine-btn" onclick="game.learnAboutEmotions()">â¤ï¸ <span data-translate="learnEmotions">LÃ¦r fÃ¸lelser</span></button>
                        <button class="routine-btn" onclick="game.cognitiveTherapy()">ğŸ§  <span data-translate="cognitiveTherapy">Kognitiv terapi</span></button>
                    </div>
                    <h4 data-translate="learning">LÃ¦ring og utvikling</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.learnEnvironment()">ğŸŒ <span data-translate="environment">MiljÃ¸vern</span></button>
                        <button class="routine-btn" onclick="game.learnEconomics()">ğŸ’° <span data-translate="economics">Ã˜konomi</span></button>
                        <button class="routine-btn" onclick="game.learnEthics()">ğŸ¤” <span data-translate="ethics">Etikk & Filosofi</span></button>
                        <button class="routine-btn" onclick="game.learnClimate()">ğŸŒ¡ï¸ <span data-translate="climate">Klimaendringer</span></button>
                        <button class="routine-btn" onclick="game.learnAI()">ğŸ¤– <span data-translate="ai">AI & Digitalisering</span></button>
                        <button class="routine-btn" onclick="game.learnResourceManagement()">âš¡ <span data-translate="resources">RessurshÃ¥ndtering</span></button>
                    </div>
                    <h4 data-translate="futureActions">Fremtidshandlinger</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.getDriversLicense()" id="driversLicenseBtn" style="display: none;">ğŸš— <span>Ta lappen (16+)</span></button>
                        <button class="routine-btn" onclick="game.moveOut()" id="moveOutBtn" style="display: none;">ğŸ  <span>Flytt hjemmefra (18+)</span></button>
                        <button class="routine-btn" onclick="game.volunteerForClimate()">ğŸŒ± <span data-translate="climateVolunteer">Klimafrivillig</span></button>
                        <button class="routine-btn" onclick="game.workOnAIProject()">ğŸ¤– <span data-translate="aiProject">AI-prosjekt</span></button>
                    </div>
                    <h4 data-translate="growth">Vekst og valg</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.studyHard()">ğŸ“š <span data-translate="study">Studer</span></button>
                        <button class="routine-btn" onclick="game.volunteer()">ğŸ¤ <span data-translate="volunteer">Frivillig</span></button>
                        <button class="routine-btn" onclick="game.helpOthers()">ğŸ¦¸ <span data-translate="help">Hjelp andre</span></button>
                        <button class="routine-btn" onclick="game.exercise()">ğŸƒ <span data-translate="exercise">Trening</span></button>
                        <button class="routine-btn" id="chooseCareerBtn" onclick="game.chooseCareer()" style="display: none;">ğŸ’¼ <span>Velg karriere (16+ Ã¥r)</span></button>
                    </div>
                    <h4 data-translate="work">Arbeid</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.work()">ğŸ’¼ <span data-translate="work">Jobb</span></button>
                    </div>
                    <h4 data-translate="freeTime">Fritid</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.readBooks()" id="readBooksBtn">ğŸ“š <span data-translate="readBooks">Les bÃ¸ker</span></button>
                        <button class="routine-btn" onclick="game.playVideoGames()">ğŸ® <span data-translate="games">Spill</span></button>
                        <button class="routine-btn" onclick="game.quizAboutEmotions()">â“ <span data-translate="quiz">FÃ¸lelses-quiz</span></button>
                        <button class="routine-btn" onclick="game.listenToMusic()">
                            <img src="assets/images/cd.png" alt="Music" class="action-icon" style="width: 20px; height: 20px;" loading="lazy"> <span data-translate="music">HÃ¸r musikk</span>
                        </button>
                        <button class="routine-btn" onclick="game.callFriend()">
                            <img src="assets/images/nokiaphone.png" alt="Phone" class="action-icon" style="width: 20px; height: 20px;" loading="lazy"> <span data-translate="call">Ring venn</span>
                        </button>
                    </div>
                    <h4 data-translate="minigames">Minispill</h4>
                    <div class="routine-buttons">
                        <button class="routine-btn" onclick="game.playNumberGame()">ğŸ”¢ <span data-translate="numberGame">Tall-spill</span></button>
                        <button class="routine-btn" onclick="game.playMemoryGame()">ğŸ§  <span data-translate="memoryGame">Hukommelsesspill</span></button>
                        <button class="routine-btn" onclick="game.playGuessGame()">ğŸ¯ <span data-translate="guessGame">Gjetespill</span></button>
                    </div>
                </div>
                </div>

                <div class="time-control">
                    <button class="time-btn" onclick="game.nextDay()">Next Year â†’</button>
                    <div class="time-info">
                        <span>Age: <span id="currentAge">0</span></span>
                        <span>Year: <span id="currentYear">2085</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop playsinline preload="auto">
        <source src="assets/audio/08 - Free.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script src="js/character-renderer.js"></script>
    <script src="js/pixi-renderer.js"></script>
    <script src="js/canvas-renderer.js"></script>
    <script src="js/particle-system.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/translations.js"></script>
    <script src="js/game.js"></script>
    <script>
        // Register Service Worker for PWA support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Try relative path first (works for both local and GitHub Pages)
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                        // Try with absolute path as fallback (for GitHub Pages)
                        const absolutePath = window.location.pathname.replace(/\/[^/]*$/, '/sw.js');
                        navigator.serviceWorker.register(absolutePath)
                            .then((registration) => {
                                console.log('Service Worker registered with absolute path:', registration.scope);
                            })
                            .catch((err) => {
                                console.log('Service Worker registration failed completely:', err);
                            });
                    });
            });
        }
        
        // Check if username is provided, redirect to login if not
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const username = urlParams.get('username');
            if (!username) {
                window.location.href = 'login.html';
            }
        });
    </script>
    
    <!-- Profile Modal -->
    <div id="profileModal" class="modal" style="display: none;">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2 id="profileEditingTitle">Profilredigering</h2>
                <span class="close-modal" onclick="game.closeProfile()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-section">
                    <h3>Avatar</h3>
                    <div class="avatar-options">
                        <div class="current-avatar" id="currentAvatarDisplay">
                            <div class="child-avatar-large" id="profileAvatar">ğŸ‘¶</div>
                            <p id="currentAvatarText">NÃ¥vÃ¦rende avatar</p>
                        </div>
                        <div class="avatar-choices">
                            <h4 id="chooseAvatarText">Velg avatar:</h4>
                            <div class="avatar-tabs">
                                <button class="tab-btn active" onclick="game.showAvatarTab('badges')" id="badgesTabBtn">Badges</button>
                                <button class="tab-btn" onclick="game.showAvatarTab('upload')" id="uploadTabBtn">Last opp bilde</button>
                            </div>
                            <div id="badgesTab" class="avatar-tab-content active">
                                <div class="badges-grid" id="badgesGrid">
                                    <!-- Badges will be populated here -->
                                </div>
                            </div>
                            <div id="uploadTab" class="avatar-tab-content">
                                <input type="file" id="avatarUpload" accept="image/*" onchange="game.handleAvatarUpload(event)" style="display: none;">
                                <button class="btn-primary" onclick="document.getElementById('avatarUpload').click()" id="selectImageBtn">Velg bilde</button>
                                <p style="font-size: 0.9em; margin-top: 10px; color: #666;" id="uploadImageHint">Last opp ditt eget bilde som avatar</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3 data-translate="language">SprÃ¥k</h3>
                    <div class="language-selector">
                        <label>
                            <input type="radio" name="language" value="no" onchange="game.setLanguage('no')" checked>
                            <span>ğŸ‡³ğŸ‡´ Norsk</span>
                        </label>
                        <label>
                            <input type="radio" name="language" value="en" onchange="game.setLanguage('en')">
                            <span>ğŸ‡¬ğŸ‡§ English</span>
                        </label>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3 id="aboutMeTitle">Om meg</h3>
                    <textarea id="profileBio" rows="4" placeholder="Skriv litt om deg selv..." style="width: 100%; padding: 10px; border-radius: 10px; border: 2px solid var(--primary-1); font-family: inherit;"></textarea>
                    <button class="btn-primary" onclick="game.saveProfile()" style="margin-top: 10px;" id="saveBioBtn">Lagre bio</button>
                </div>
                
                <div class="profile-section">
                    <h3 data-translate="shop">Butikk</h3> ğŸ’°
                    <div class="money-display-profile">
                        <p id="profileMoneyText">Du har: <span id="profileMoney">0</span> kr</p>
                    </div>
                    <div class="shop-items" id="shopItems">
                        <!-- Shop items will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Universe Modal (for School, Playground, Cooking, etc.) -->
    <div id="universeModal" class="modal" style="display: none;">
        <div class="modal-content universe-modal">
            <div class="modal-header">
                <h2 id="universeTitle">Univers</h2>
                <span class="close-modal" onclick="game.closeUniverse()">&times;</span>
            </div>
            <div class="modal-body" id="universeContent">
                <!-- Content will be dynamically generated -->
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div id="helpModal" class="modal" style="display: none;">
        <div class="modal-content help-modal">
            <div class="modal-header">
                <h2>â“ Hjelp og veiledning</h2>
                <span class="close-modal" onclick="game.closeHelp()">&times;</span>
            </div>
            <div class="modal-body" id="helpContent">
                <!-- Help content will be dynamically generated -->
            </div>
        </div>
    </div>
    
    <!-- About Game Tab Content -->
    <div id="aboutGameTab" class="menu-tab-content" style="display: none;">
        <div class="tab-content-wrapper">
            <div class="tab-section">
                    <h2>ğŸ“– Om MyChild - 2085: Dystopia Edition</h2>
                <div class="about-content">
                    <p class="intro-text">
                        <strong>MyChild - 2085: Dystopia Edition</strong> er et interaktivt omsorgsspill hvor du tar vare pÃ¥ et barn i en dystopisk fremtid. Norge er i krise - oljefondet er tomt, ressursene er knappe, klimaet er i fritt fall, AI tar over, og eldrebÃ¸lgen slÃ¥r til. Kan du ta riktige valg og redde fremtiden? 
                        Ditt mÃ¥l er Ã¥ hjelpe barnet Ã¥ vokse opp, lÃ¦re, og trives gjennom ulike utfordringer og opplevelser.
                    </p>
                    
                    <h3>ğŸ¯ Spillets mÃ¥l</h3>
                    <ul class="feature-list">
                        <li><strong>Ta vare pÃ¥ barnet:</strong> Hold alle stats (happiness, energy, hunger, social, learning) pÃ¥ et sunt nivÃ¥</li>
                        <li><strong>Daglige rutiner:</strong> FÃ´r, bad, lek og les med barnet hver dag</li>
                        <li><strong>UtfÃ¸r aktiviteter:</strong> GÃ¥ pÃ¥ skole, lek utendÃ¸rs, tilbring tid med venner, og mer</li>
                        <li><strong>HÃ¥ndter utfordringer:</strong> StÃ¸tt barnet gjennom mobbing, skolepress og andre vanskelige situasjoner</li>
                        <li><strong>Bygg relasjon:</strong> Styrk forholdet til barnet gjennom stÃ¸ttende valg og oppmerksomhet</li>
                    </ul>
                    
                    <h3>ğŸ® Hvordan spille</h3>
                    <div class="how-to-play">
                        <div class="step">
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <h4>Daglige rutiner</h4>
                                <p>Hver dag mÃ¥ du fÃ´re, bade, leke og lese med barnet. Disse rutinene er kritiske for barnets velvÃ¦re!</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <h4>UtfÃ¸r aktiviteter</h4>
                                <p>Bruk handlingene dine (vist Ã¸verst) pÃ¥ aktiviteter som skole, lek, venner, og mer. Du har begrenset antall handlinger per dag.</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <h4>FÃ¸lg med pÃ¥ stats</h4>
                                <p>Hold Ã¸ye med happiness, energy, hunger, social og learning. RÃ¸de/orange stats trenger umiddelbar oppmerksomhet!</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <h4>Ta valg</h4>
                                <p>NÃ¥r hendelser oppstÃ¥r, velg klokt. Dine valg pÃ¥virker barnets fÃ¸lelser, resiliens og tillit til deg.</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">5</span>
                            <div class="step-content">
                                <h4>Vokse opp</h4>
                                <p>Barnet vokser opp over tid. Nye utfordringer og muligheter dukker opp nÃ¥r de blir eldre.</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>ğŸ’¡ Tips</h3>
                    <ul class="tips-list">
                        <li>âœ… Prioriter daglige rutiner - de er viktigere enn du tror!</li>
                        <li>âœ… Hold stats over 30 for Ã¥ unngÃ¥ negative konsekvenser</li>
                        <li>âœ… VÃ¦r stÃ¸ttende nÃ¥r barnet opplever mobbing eller utfordringer</li>
                        <li>âœ… Balanser aktiviteter - for mye av noe kan vÃ¦re skadelig</li>
                        <li>âœ… Spillet lagres automatisk, sÃ¥ du kan alltid komme tilbake</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- About Project Tab Content -->
    <div id="aboutProjectTab" class="menu-tab-content" style="display: none;">
        <div class="tab-content-wrapper">
            <div class="tab-section">
                <h2>ğŸ’¼ Om prosjektet</h2>
                <div class="about-content">
                    <p class="intro-text">
                        <strong>MyChild - 2000s Edition</strong> er et nostalgisk omsorgsspill inspirert av klassiske spill fra 2000-tallet. 
                        Spillet kombinerer elementer fra tamagotchi, virtual pet-spill og moderne narrativ design.
                    </p>
                    
                    <h3>ğŸ¨ Prosjektinfo</h3>
                    <div class="project-info">
                        <p><strong>Versjon:</strong> 1.0</p>
                        <p><strong>Utviklet med:</strong> HTML5, CSS3, JavaScript</p>
                        <p><strong>Inspirasjon:</strong> Klassiske virtual pet-spill fra 2000-tallet</p>
                        <p><strong>Design:</strong> Nostalgisk 2000s-estetikk med moderne funksjonalitet</p>
                    </div>
                    
                    <h3>ğŸ‘¤ Om meg</h3>
                    <div class="contact-info">
                        <p>Hei! Jeg er utvikleren bak MyChild - 2000s Edition.</p>
                        <p>Dette prosjektet er en hyllest til barndommens favorittspill og en Ã¸velse i Ã¥ lage noe meningsfullt og interaktivt.</p>
                        
                        <div class="contact-details">
                            <h4>ğŸ“§ Kontakt meg:</h4>
                            <p class="email-link">
                                <a href="mailto:ms.tery@icloud.com" style="color: var(--primary-1); text-decoration: none; font-weight: bold;">
                                    ms.tery@icloud.com
                                </a>
                            </p>
                            <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
                                Jeg setter pris pÃ¥ tilbakemeldinger, forslag og spÃ¸rsmÃ¥l!
                            </p>
                        </div>
                    </div>
                    
                    <h3>ğŸ™ Takk</h3>
                    <p>Takk for at du spiller MyChild - 2000s Edition! Jeg hÃ¥per du fÃ¥r like mye glede av Ã¥ spille det som jeg fikk av Ã¥ lage det.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Profile Tab Content -->
    <div id="profileMenuTab" class="menu-tab-content" style="display: none;">
        <div class="tab-content-wrapper">
            <div class="tab-section">
                <h2>ğŸ‘¤ Profil</h2>
                <div class="profile-tab-content">
                    <div class="profile-info-card">
                        <div class="profile-avatar-large">
                            <div class="child-avatar-large" id="profileTabAvatar">ğŸ‘¶</div>
                        </div>
                        <h3 id="profileTabName">Bruker</h3>
                        <p class="profile-username" id="profileTabUsername">Brukernavn</p>
                    </div>
                    
                    <div class="profile-actions">
                        <button class="btn-primary profile-action-btn" onclick="game.openProfile()">
                            <span class="btn-icon">âœï¸</span>
                            <span class="btn-text">Rediger profil</span>
                        </button>
                        <button class="btn-primary profile-action-btn" onclick="game.showHelp()">
                            <span class="btn-icon">â“</span>
                            <span class="btn-text">Hjelp og veiledning</span>
                        </button>
                        <button class="btn-primary profile-action-btn" id="installAppBtn" onclick="game.installApp()" style="display: none;">
                            <span class="btn-icon">ğŸ“±</span>
                            <span class="btn-text">Installer app</span>
                        </button>
                        <button class="btn-danger profile-action-btn" onclick="game.logout()">
                            <span class="btn-icon">ğŸšª</span>
                            <span class="btn-text">Logg ut</span>
                        </button>
                    </div>
                    
                    <div class="install-section" id="installSection">
                        <h3>ğŸ“± Installer app</h3>
                        <div class="install-info" id="installInfo">
                            <p id="installStatus">Sjekker installasjonsmuligheter...</p>
                        </div>
                        <div class="install-instructions" id="installInstructions" style="display: none;">
                            <h4>Hvordan installere:</h4>
                            <div id="installSteps"></div>
                        </div>
                    </div>
                    
                    <div class="profile-stats-summary">
                        <h3>Spillstatistikk</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-label">Dager spilt:</span>
                                <span class="stat-value" id="profileDaysPlayed">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Barnets alder:</span>
                                <span class="stat-value" id="profileChildAge">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Ã…r:</span>
                                <span class="stat-value" id="profileYear">2000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Diary Tab Content -->
    <div id="diaryTab" class="menu-tab-content" style="display: none;">
        <div class="tab-content-wrapper">
            <div class="tab-section">
                <h2>ğŸ“” Dagbok</h2>
                <div class="diary-container">
                    <div class="diary-write-section">
                        <h3>Skriv i dagbok</h3>
                        <textarea id="diaryEntryText" rows="6" placeholder="Skriv hva du tenker pÃ¥ i dag..." style="width: 100%; padding: 10px; border-radius: 10px; border: 2px solid var(--primary-1); font-family: inherit; resize: vertical;"></textarea>
                        <button class="btn-primary" onclick="game.addManualDiaryEntry()" style="margin-top: 10px;">ğŸ’¾ Lagre dagbok-innlegg</button>
                    </div>
                    <div class="diary-entries-section">
                        <h3>Dagbok-innlegg</h3>
                        <div id="diaryEntriesList" class="diary-entries-list">
                            <!-- Diary entries will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

